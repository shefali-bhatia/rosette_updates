#lang rosette 
 
(require "../cosette.rkt" "../util.rkt" "../denotation.rkt" "../cosette.rkt" "../sql.rkt" "../evaluator.rkt" "../syntax.rkt" "../symmetry.rkt" "../test-util.rkt") 
  

(provide ros-instance)  

(current-bitwidth #f)

(define t0 (table-info "input" (list "emp_id" "emp_sal" "emp_grp")))
 
(define (q5 tables) 
(UNION-ALL (SELECT (VALS "t6.emp_id" "t6.emp_sal" "t6.emp_grp" )
 FROM (AS (JOIN (AS (SELECT (VALS "t3.emp_sal" (VAL-UNOP aggr-min (val-column-ref "t3.emp_id")) )
 FROM (AS (NAMED (list-ref tables 0)) ["t3" (list "emp_id" "emp_sal" "emp_grp")])
 WHERE (TRUE)
 GROUP-BY (list "t3.emp_sal" )
 HAVING (TRUE)) ["t2" (list "emp_sal" "min_emp_id")]) (AS (NAMED (list-ref tables 0)) ["t1" (list "emp_id" "emp_sal" "emp_grp")])) ["t6" (list "emp_sal" "min_emp_id" "emp_id" "emp_sal1" "emp_grp")])
 WHERE (AND (BINOP "t6.emp_sal" = "t6.emp_sal1") (BINOP "t6.min_emp_id" < "t6.emp_id"))) (SELECT (VALS "t4.emp_id" "t4.min_emp_sal" "t4.emp_grp" )
 FROM (AS (SELECT (VALS "t5.emp_id" "t5.emp_grp" (VAL-UNOP aggr-min (val-column-ref "t5.emp_sal")) )
 FROM (AS (SELECT (VALS "input.emp_id" "input.emp_sal" "input.emp_grp" )
 FROM (NAMED (list-ref tables 0))
 WHERE (AND (BINOP "input.emp_grp" = 11) (TRUE))) ["t5" (list "emp_id" "emp_sal" "emp_grp")])
 WHERE (TRUE)
 GROUP-BY (list "t5.emp_id" "t5.emp_grp" )
 HAVING (TRUE)) ["t4" (list "emp_id" "emp_grp" "min_emp_sal")])
 WHERE (TRUE))))
 
(define (q4 tables) 
(UNION-ALL (SELECT (VALS "t5.emp_id" "t5.emp_sal" "t5.emp_grp" )
 FROM (AS (JOIN (AS (SELECT (VALS "t2.emp_sal" "t2.emp_grp" (VAL-UNOP aggr-min (val-column-ref "t2.emp_id")) )
 FROM (AS (NAMED (list-ref tables 0)) ["t2" (list "emp_id" "emp_sal" "emp_grp")])
 WHERE (TRUE)
 GROUP-BY (list "t2.emp_sal" "t2.emp_grp" )
 HAVING (TRUE)) ["t1" (list "emp_sal" "emp_grp" "min_emp_id")]) (AS (NAMED (list-ref tables 0)) ["t6" (list "emp_id" "emp_sal" "emp_grp")])) ["t5" (list "emp_sal" "emp_grp" "min_emp_id" "emp_id" "emp_sal1" "emp_grp1")])
 WHERE (AND (BINOP "t5.emp_sal" = "t5.emp_sal1") (BINOP "t5.min_emp_id" < "t5.emp_id"))) (SELECT (VALS "t3.emp_id" "t3.min_emp_sal" "t3.emp_grp" )
 FROM (AS (SELECT (VALS "t4.emp_id" "t4.emp_grp" (VAL-UNOP aggr-min (val-column-ref "t4.emp_sal")) )
 FROM (AS (SELECT (VALS "input.emp_id" "input.emp_sal" "input.emp_grp" )
 FROM (NAMED (list-ref tables 0))
 WHERE (AND (BINOP "input.emp_grp" = 11) (TRUE))) ["t4" (list "emp_id" "emp_sal" "emp_grp")])
 WHERE (TRUE)
 GROUP-BY (list "t4.emp_id" "t4.emp_grp" )
 HAVING (TRUE)) ["t3" (list "emp_id" "emp_grp" "min_emp_sal")])
 WHERE (TRUE))))
 
(define (q3 tables) 
(UNION-ALL (SELECT (VALS "t1.emp_id" "t1.min_emp_sal" "t1.emp_grp" )
 FROM (AS (SELECT (VALS "t6.emp_id" "t6.emp_grp" (VAL-UNOP aggr-min (val-column-ref "t6.emp_sal")) )
 FROM (AS (SELECT (VALS "input.emp_id" "input.emp_sal" "input.emp_grp" )
 FROM (NAMED (list-ref tables 0))
 WHERE (AND (BINOP "input.emp_grp" = 11) (TRUE))) ["t6" (list "emp_id" "emp_sal" "emp_grp")])
 WHERE (TRUE)
 GROUP-BY (list "t6.emp_id" "t6.emp_grp" )
 HAVING (TRUE)) ["t1" (list "emp_id" "emp_grp" "min_emp_sal")])
 WHERE (TRUE)) (SELECT (VALS "t2.emp_id" "t2.emp_sal" "t2.emp_grp" )
 FROM (AS (JOIN (AS (SELECT (VALS "t5.emp_sal" (VAL-UNOP aggr-min (val-column-ref "t5.emp_id")) )
 FROM (AS (NAMED (list-ref tables 0)) ["t5" (list "emp_id" "emp_sal" "emp_grp")])
 WHERE (TRUE)
 GROUP-BY (list "t5.emp_sal" )
 HAVING (TRUE)) ["t4" (list "emp_sal" "min_emp_id")]) (AS (NAMED (list-ref tables 0)) ["t3" (list "emp_id" "emp_sal" "emp_grp")])) ["t2" (list "emp_sal" "min_emp_id" "emp_id" "emp_sal1" "emp_grp")])
 WHERE (AND (BINOP "t2.emp_sal" = "t2.emp_sal1") (BINOP "t2.min_emp_id" < "t2.emp_id")))))
 
(define (q2 tables) 
(UNION-ALL (SELECT (VALS "t1.emp_id" "t1.min_emp_sal" "t1.emp_grp" )
 FROM (AS (SELECT (VALS "t6.emp_id" "t6.emp_grp" (VAL-UNOP aggr-min (val-column-ref "t6.emp_sal")) )
 FROM (AS (SELECT (VALS "input.emp_id" "input.emp_sal" "input.emp_grp" )
 FROM (NAMED (list-ref tables 0))
 WHERE (AND (BINOP "input.emp_grp" = 11) (TRUE))) ["t6" (list "emp_id" "emp_sal" "emp_grp")])
 WHERE (TRUE)
 GROUP-BY (list "t6.emp_id" "t6.emp_grp" )
 HAVING (TRUE)) ["t1" (list "emp_id" "emp_grp" "min_emp_sal")])
 WHERE (TRUE)) (SELECT (VALS "t5.emp_id" "t5.min_emp_sal" "t5.emp_grp" )
 FROM (AS (JOIN (AS (SELECT (VALS "t2.emp_id" (VAL-UNOP aggr-min (val-column-ref "t2.emp_sal")) )
 FROM (AS (NAMED (list-ref tables 0)) ["t2" (list "emp_id" "emp_sal" "emp_grp")])
 WHERE (TRUE)
 GROUP-BY (list "t2.emp_id" )
 HAVING (TRUE)) ["t3" (list "emp_id" "min_emp_sal")]) (AS (NAMED (list-ref tables 0)) ["t4" (list "emp_id" "emp_sal" "emp_grp")])) ["t5" (list "emp_id" "min_emp_sal" "emp_id1" "emp_sal" "emp_grp")])
 WHERE (AND (BINOP "t5.min_emp_sal" = "t5.emp_sal") (BINOP "t5.emp_id" > "t5.emp_id1")))))
 
(define (q1 tables) 
(UNION-ALL (SELECT (VALS "t1.emp_id" "t1.min_emp_sal" "t1.emp_grp" )
 FROM (AS (SELECT (VALS "t5.emp_id" "t5.emp_grp" (VAL-UNOP aggr-min (val-column-ref "t5.emp_sal")) )
 FROM (AS (SELECT (VALS "input.emp_id" "input.emp_sal" "input.emp_grp" )
 FROM (NAMED (list-ref tables 0))
 WHERE (AND (BINOP "input.emp_grp" = 11) (TRUE))) ["t5" (list "emp_id" "emp_sal" "emp_grp")])
 WHERE (TRUE)
 GROUP-BY (list "t5.emp_id" "t5.emp_grp" )
 HAVING (TRUE)) ["t1" (list "emp_id" "emp_grp" "min_emp_sal")])
 WHERE (TRUE)) (SELECT (VALS "t6.emp_id" "t6.emp_sal" "t6.emp_grp" )
 FROM (AS (JOIN (AS (SELECT (VALS "t4.emp_sal" "t4.emp_grp" (VAL-UNOP aggr-min (val-column-ref "t4.emp_id")) )
 FROM (AS (NAMED (list-ref tables 0)) ["t4" (list "emp_id" "emp_sal" "emp_grp")])
 WHERE (TRUE)
 GROUP-BY (list "t4.emp_sal" "t4.emp_grp" )
 HAVING (TRUE)) ["t2" (list "emp_sal" "emp_grp" "min_emp_id")]) (AS (NAMED (list-ref tables 0)) ["t3" (list "emp_id" "emp_sal" "emp_grp")])) ["t6" (list "emp_sal" "emp_grp" "min_emp_id" "emp_id" "emp_sal1" "emp_grp1")])
 WHERE (AND (BINOP "t6.emp_sal" = "t6.emp_sal1") (BINOP "t6.min_emp_id" < "t6.emp_id")))))

(define ros-instance (list q1 q2 (list t0)))
